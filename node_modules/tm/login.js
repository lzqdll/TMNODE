const https = require('http');
const StringDecoder = require('string_decoder').StringDecoder;
const decoder = new StringDecoder('utf8');
var options = {
	hostname : 'localhost',
	port : 8080,
	path : '/TM/cp/cplogin.action?quser.usrName=zhiliu&quser.usrPassword=!nnit1712',
	method : 'GET'
};
tokenid = 'token';

exports.refresh = (function (tt, callback) {
	options.path = '/TM/cp/cplogin.action?quser.usrName=' + tt.usrName + '&quser.usrPassword=' + tt.usrPassword;
	var a = https.request(options, function (res) {
			//console.log('statusCode: ', res.statusCode);
			//console.log('headers: ', res.headers);
			res.on('data', function (d) {
				tokenid = decoder.write(d)
					callback(tokenid);
			});
		})
		a.end();
})
