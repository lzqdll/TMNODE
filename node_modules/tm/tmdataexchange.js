const https = require('http');
const StringDecoder = require('string_decoder').StringDecoder;
const decoder = new StringDecoder('utf8');
const lbtargetpath='/TM/cp/cpgetleavebalance.action?searchTable=leavebalance';
const vacationAddingpath='/TM/cp/cpgetleavebalance.action?searchTable=leavebalance';
var options = {
	hostname : 'localhost',
	port : 8080,
//	path : '/TM/cp/cpgetleavebalance.action?searchTable=leavebalance',
	method : 'GET'
};

exports.getleavebalance = function (user,tt,callback) {
	//console.log('leavebalance.js user id: '+ user.id);
	options.path=lbtargetpath+'&userid='+user.id;
	//console.log('$$$$$$$$$$$OPTION PATH:'+options.path);
	var a = https.request(options, function (res) {
			//console.log('statusCode: ', res.statusCode);
			//console.log('headers: ', res.headers);
			res.on('data', function (d) {
				tokenid = decoder.write(d)
				callback(tokenid);
			});
		})
	a.end();
}
exports.vacationAdding = function (user,obj,callback) {
	//console.log('leavebalance.js user id: '+ user.id);
	options.path=vacationAddingpath+'&userid='+user.id;
	//console.log('$$$$$$$$$$$OPTION PATH:'+options.path);
	var a = https.request(options, function (res) {
			//console.log('statusCode: ', res.statusCode);
			//console.log('headers: ', res.headers);
			res.on('data', function (d) {
				tokenid = decoder.write(d)
				callback(tokenid);
			});
		})
	a.end();
}
